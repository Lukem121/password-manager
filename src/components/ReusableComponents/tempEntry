<script lang="ts">
    import CopyButton from "./CopyButton.svelte";
    import { slide } from 'svelte/transition';
    import { sineInOut } from 'svelte/easing';

    export let entry = {
        title: "Facebook",
        username: "lukeask@mail.com",
        password: "goodpassword123",
        url: "No url",
        notes: "Lorem ipsum dolor, sit amet consectetur adipisicing elit. Eveniet fuga accusantium minima, veritatis rerum aliquid quo euLorem ipsum dolor, sit amet consectetur adipisicing elit. Eveniet fuga accusantium minima, veritatis rerum aliquid quo eum cumqLorem ipsum dolor, sit amet consectetur adipisicing elit. Eveniet fuga accusantium minima, veritatis rerum aliquid quo eum cumque aspernatur incidunt autem quod libero eos! Unde quis dignissimos pariatur excepturi recusandae.ue aspernatur incidunt autem quod libero eos! Unde quis dignissimos pariatur excepturi recusandae.m cumque aspernatur incidunt autem quod libero eos! Unde quis dignissimos pariatur excepturi recusandae.",
    };

    let showDraw = false;
    let showPassword = false;

    const toggleShowPassword = () => {
        showPassword = !showPassword;
    }
    const toggleDraw = () => {
        showDraw = !showDraw;
    }
</script>

<fieldset class="wrapper">
    <legend>{entry.title}</legend>
    <div class="content">
        <div class="row mb-20">
            <span class="title">Username</span>
            <div class="value">{entry.username}</div>
            <div class="copy-btn">
                <CopyButton toCopy={ entry.username } />
            </div>
        </div>  

        <div class="row mb-10">
            <span class="title">Password</span>
            <div class="value">
                {#if showPassword}
                    {entry.password}
                {:else}
                    {entry.password.replace(/./g, "â€¢")}
                {/if}

                <div class="password-eye" on:click={toggleShowPassword}>
                    {#if showPassword}
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="eye" class="svg-inline--fa fa-eye fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                            <path fill="currentColor" d="M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"></path>
                        </svg>
                    {:else}
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="eye-slash" class="svg-inline--fa fa-eye-slash fa-w-20" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                            <path fill="currentColor" d="M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"></path>
                        </svg>
                    {/if}
                </div>

            </div>
            <div class="copy-btn">
                <CopyButton toCopy={ entry.password } />
            </div>
        </div>   
        
        {#if showDraw}
            <div class="drawer" transition:slide="{{duration: 200, easing: sineInOut }}">
                <div class="row mb-20">
                    <span class="title">URL</span>
                    <div class="value">{entry.url}</div>
                    <div class="copy-btn">
                        <CopyButton toCopy={ entry.url } />
                    </div>
                </div>

                <div class="notes-section">
                    <div class="notes-value"><p>{entry.notes}</p></div>
                </div>
            </div> 
        {/if}

        <div class="drawer-btn" on:click={toggleDraw} class:spin="{showDraw}">
            <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-down" class="svg-inline--fa fa-chevron-down fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="white" d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"></path></svg>
        </div>
        
    </div>
</fieldset>

<style type="text/scss">

    .mb-10 {
        margin-bottom: 10px;
    }
    .mb-20 {
        margin-bottom: 20px;
    }

    .row {
        display: flex;
        .title {
            min-width: 25%;
            text-align: center;
            margin-right: 5px;
            padding: 3px 20px;
            border-radius: 12px;
            border-style: none;
            background-color: #3E3E3E;
            font-size: 1.1rem;
            font-weight: bold;
        }
        .value {
            text-overflow: ellipsis;
            white-space: nowrap;
            overflow: hidden;
            text-align: center;
            width: 80%;
            padding: 3px 20px;
            border-radius: 12px;
            border-style: none;
            color: black;
            background-color: white;
            font-size: 1rem;
            font-weight: bold;
        }
    }

    .drawer{
        border-top: 1px solid #505050;
        margin-top: 20px;
        padding-top: 20px;
        .notes-section{
            .notes-value{
                max-height: 150px;
                overflow: auto;
                border-radius: 12px;
                border-style: none;
                background-color: white;
                
                p{
                    margin: 15px;
                    color: black;
                    font-size: 1rem;
                    font-weight: bold;
                }
            }
            margin-bottom: 10px;
        }
        
    }
    
    .drawer-btn {
        text-align: center;
        cursor: pointer;
        height: 18px;
        svg{
            width: 15px;
        }
    }
    .spin {
        transform: rotate(180deg);
    }

    .password-eye {
        float: right;
        cursor: pointer;
        height: 18px;
        svg{
            width: 15px;
        }
    }

    

    // Card css
    .wrapper {
        max-width: 80%;
        padding: 5px 20px;
        margin: 0 10px;
        border-radius: 16px;
        background: var(--bg-dark-colour);
        justify-content: space-between;
        flex-direction: column;
        display: flex;
        border: 0;

        legend {
            width: 100%;
            font-size: 22px;
            font-weight: bold;
        }
        .action-btn {
            padding: 15px 0px 15px;
            justify-content: flex-end;
            display: flex;
        }
        .error {
            color: crimson;
        }

        @media screen and (max-width: 500px) {
            margin: 0 5px;
            padding: 5px 10px 5px 10px;
        }
    }
</style>